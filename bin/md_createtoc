#!/usr/bin/env python3

import re
import sys

def get_url(header):
    parsed = ""
    header = header.lower()
    for c in header:
        if c in "abcdefghijklmnopqrstuvwxyz0123456789-":
            parsed += c
        elif c == ' ':
            parsed += '-'
    parsed = "markdown-header-" + parsed
    parsed = parsed.replace('---', '-')
    return parsed


rx = re.compile("(^\# |^\#\# )")

lines = []

for line in sys.stdin:
    line = line.strip()
    if rx.match(line):
        lines.append(line)

print(lines)

count = 1
i = 0
while i < len(lines):
    line = lines[i][2:]
    print("  {}. [{}](#{})".format(count, line, get_url(line)))
    subcount = 1
    while i+1 < len(lines) and lines[i+1][1] == "#":
        i += 1
        line = lines[i][3:]
        print("    {}. [{}](#{})".format(subcount, line, get_url(line)))
        subcount += 1
    count += 1
    i += 1

